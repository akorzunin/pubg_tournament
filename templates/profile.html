<!DOCTYPE html>
<html>
<head>
    <title>Профиль</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="container">
    <h1>Профиль пользователя</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% for category, message in messages %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
    {% endwith %}

    <form method="post">
        <label>Логин (нельзя изменить):</label>
        <input type="text" value="{{ user.username }}" disabled>

        <label>Имя:</label>
        <input type="text" name="name" value="{{ user.name or '' }}">

        <label>PUBG Никнейм:</label>
        <input type="text" name="pubg_nickname" value="{{ user.pubg_nickname or '' }}" required>

        <label>Дата рождения:</label>
        <input type="date" name="birthday" value="{{ user.birthday.strftime('%Y-%m-%d') if user.birthday else '' }}">

        <hr>

        <label>Текущий пароль:</label>
        <input type="password" name="current_password">

        <label>Новый пароль:</label>
        <input type="password" name="new_password" minlength="6" maxlength="30">

        <p><small>Если вы хотите сменить пароль — введите текущий и новый пароль.</small></p>

        <button type="submit" class="button">Сохранить изменения</button>
    </form>

    {% if user.role == 'admin' %}
        <a href="{{ url_for('admin') }}" class="button">Назад</a>
    {% else %}
        <a href="{{ url_for('home') }}" class="button">Назад</a>
    {% endif %}
</div>
</body>
</html>
